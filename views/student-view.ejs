<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="/css/student-view.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Offensive Line - Student View</title>
</head>

<body>
    <interior-body>
        <div>
            <!-- Player Info Area at the top of the window -->
            <player-name id="playerName">
                <%= athlete.first_name %>
                    <%= athlete.last_name %>
            </player-name>
            <player-stats>
                <player-year>Year: </player-year><br />
                <player-height>Height: </player-height><br />
                <player-weight>Weight:</player-weight><br />
                <player-position>Current Position:</player-position>
            </player-stats>
            <player-stats class="stat-value">
                <player-year id="playerYear">
                    <%= statistics[statistics.length - 1].grade %>
                </player-year><br />
                <player-height id="playerHeight">
                    <%= Math.floor(statistics[statistics.length - 1].height / 12) %>' <%= statistics[statistics.length - 1].height % 12 %>"
                </player-height><br />
                <player-weight id="playerWeight">
                    <%= statistics[statistics.length - 1].weight %> lbs
                </player-weight><br />
                <player-position id="playerPosition">
                    <%= statistics[statistics.length - 1].position %>
                </player-position>
            </player-stats>
            <img class="player-photo" id="playerPhoto"
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSjL5uRukQxddVG8oeVQpPttaiZotrzgbf71xYUUvRjJTepPztXlK-aI5YMKoNacRmMIm4:https://mario.wiki.gallery/images/thumb/2/27/SuperMarioParty_Waluigi.png/640px-SuperMarioParty_Waluigi.png&usqp=CAU"></img>
            <grade-display>0.0</grade-display>
        </div>
        <div>
            <!-- Graph/Table -->
            <div class="student-graph">
                <canvas id="studentGraph"></canvas>
            </div>
            <script>
                let tableOrderStats = [12];
                if (statistics.length == 12) { tableOrderStats = statistics }
                else {
                    statistics.forEach(stat => {
                        let a = 0;
                        if (stat.month >= 7) {a = 0;}
                        else if (stat.month <= 4) {a = 1;}
                        else if (stat.month >= 5) {a = 2;}
                        tableOrderStats[((stat.grade - 9) * 3) + a] = stat;
                    });
                }

                const data = [
                    { x: 1, y: 1 },
                    { x: 2, y: 1 },
                    { x: 3, y: 1 },
                    { x: 4, y: 1.2 },
                    { x: 5, y: 1.2 },
                    { x: 6, y: 1.3 },
                    { x: 7, y: null },
                    { x: 8, y: 1.2 },
                    { x: 9, y: .4 },
                    { x: 10, y: .3 },
                    { x: 11, y: .4 },
                    { x: 12, y: .4 },
                ]
                const crimsonLineGrade = [
                    { x: 1, y: 1.5 },
                    { x: 2, y: 1.5 },
                    { x: 3, y: 1.5 },
                    { x: 4, y: 1.5 },
                    { x: 5, y: 1.5 },
                    { x: 6, y: 1.5 },
                    { x: 7, y: 1.5 },
                    { x: 8, y: 1.5 },
                    { x: 9, y: 1.5 },
                    { x: 10, y: 1.5 },
                    { x: 11, y: 1.5 },
                    { x: 12, y: 1.5 },
                ]
                const averageJoeGrade = [
                    { x: 1, y: 1 },
                    { x: 2, y: 1 },
                    { x: 3, y: 1 },
                    { x: 4, y: 1 },
                    { x: 5, y: 1 },
                    { x: 6, y: 1 },
                    { x: 7, y: 1 },
                    { x: 8, y: 1 },
                    { x: 9, y: 1 },
                    { x: 10, y: 1 },
                    { x: 11, y: 1 },
                    { x: 12, y: 1 },
                ]
                new Chart(
                    document.getElementById('studentGraph'),
                    {
                        type: 'line',
                        data: {
                            labels: ['Fr 1', 'Fr 2', 'Fr 3', 'So 1', ' So 2', 'So 3', 'Ju 1', 'Ju 2', 'Ju 3', 'Se 1', 'Se 2', 'Se 3'],
                            datasets: [
                                {
                                    label: 'Grade',
                                    data: data.map(row => row.y),
                                    fill: false,
                                    borderColor: 'rgb(0,0,128)',
                                    tension: 0.0,
                                },
                                {
                                    label: 'Average Joe',
                                    data: averageJoeGrade.map(row => row.y),
                                    fill: false,
                                    borderColor: 'rgb(0,128,0)',
                                    tension: 0
                                },
                                {
                                    label: 'Crimson Line',
                                    data: crimsonLineGrade.map(row => row.y),
                                    fill: false,
                                    borderColor: 'rgb(220,20,60)',
                                    tension: 0
                                }
                                //Add more datasets for more data
                            ]
                        },
                        options: {
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    type: 'linear',
                                    suggestedMax: 2,
                                    suggestedMin: 0,
                                    ticks: {
                                        stepSize: .2
                                    },
                                }
                            }
                        }
                    });
            </script>
            <table>
                <tr>
                    <th>Semester</th>
                    <th>Fr 1</th>
                    <th>Fr 2</th>
                    <th>Fr 3</th>
                    <th>So 1</th>
                    <th>So 2</th>
                    <th>So 3</th>
                    <th>Ju 1</th>
                    <th>Ju 2</th>
                    <th>Ju 3</th>
                    <th>Se 1</th>
                    <th>Se 2</th>
                    <th>Se 3</th>
                </tr>
                <tr>
                    <th>Grade</th>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                    <td>100</td>
                </tr>
                <!--Add more rows for more data.-->
            </table>
        </div>
    </interior-body>
</body>

</html>